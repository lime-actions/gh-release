name: Create PR
run-name: Creating PR from ${{ github.ref_name }}

on:
  push:
  workflow_call:
    inputs:
      head:
        description: 'Head reference from which the PR is created'
        required: False
        type: string
        default: ${{ github.ref_name }}

jobs:
  create-pr:
    if: inputs.head != github.event.repository.default_branch
    runs-on: ubuntu-latest
    permissions:
       pull-requests: write
       contents: read
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        sparse-checkout: |
          .github/actions/pr-create/action.yaml
          version.txt
        sparse-checkout-cone-mode: false
    - name: Create PR from ${{ inputs.head }}
      uses: ./.github/actions/pr-create
      with:
        version-from: 'version-file'
        head: ${{ inputs.head }}
