name: Create PR
run-name: Creating PR from ${{ github.ref_name }}

on:
  push:

jobs:
  create-pr:
    if: github.event_name == 'workflow_call'
        || inputs.head != github.event.repository.default_branch
    runs-on: ubuntu-latest
    permissions:
       pull-requests: write
       contents: read
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        sparse-checkout: |
          .github/actions/pr-create/action.yaml
          version.txt
        sparse-checkout-cone-mode: false
    - name: Create PR from ${{ github.ref_name }}
      uses: ./.github/actions/pr-create
      with:
        version-from: 'version-file'
        head: ${{ github.ref_name }}
